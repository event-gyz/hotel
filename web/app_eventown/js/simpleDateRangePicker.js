var simpleDateRangePicker=function(t,e){this.parentEl="body",this.element=$(t),this.separator="至",this.startDate=this.element.val()?this.element.val().split(this.separator)[0]:"",this.endDate=this.element.val()?this.element.val().split(this.separator)[1]:"",this.minDate=new Date,this.monthLength=6,this.template='<div class="daterangepicker"><header class="bar bar-nav header"><a class="button button-link button-nav pull-left date-back"><span class="icon icon-left"></span> 返回</a><h1 class="title">选择活动日期</h1></header><div class="daterangepicker_input"><input class="input-mini" type="text"  readonly="readonly" disabled  name="daterangepicker_start" placeholder="开始日期" value="" /><input class="input-mini" type="text" readonly="readonly" disabled name="daterangepicker_end" placeholder="结束日期"  value="" /></div><div class="calendar "></div>',this.container=$(this.template).appendTo($(this.parentEl)).hide(),this.container.find(".calendar").on("click.daterangepicker",".alive",$.proxy(this.clickDate,this)),this.container.find(".daterangepicker_btns"),this.container.find(".date-back").on("click.daterangepicker",$.proxy(this.hide,this));var a=this;this.element.on("click",function(){a.show()});var n=new Date;n.getFullYear(),n.getMonth();this.generatorlastMonth()};simpleDateRangePicker.prototype={constructor:simpleDateRangePicker,getToday:function(){var t=new Date;t.getFullYear()+t.getMonth()+1+t.getDate();return t.getFullYear()+"/"+t.getMonth()+"1/"+t.getDate()},show:function(){this.container.show(),this.container.removeClass("page-from-center-to-right"),this.container.addClass("page-from-right-to-center"),this.setTips("start")},hide:function(){var t=this;this.container.on("webkitAnimationEnd",function(){t.container.hide(),t.container.off("webkitAnimationEnd")}),this.container.removeClass("page-from-right-to-center"),this.container.addClass("page-from-center-to-right")},generatorlastMonth:function(){for(var t=0;t<this.monthLength;t++){var e=new Date;e.setDate(1),cmonth=e.getMonth(),e.setMonth(cmonth+t);var a=e.getFullYear(),n=e.getMonth();this.renderCalendar(a,n)}},setTips:function(){},clickApply:function(){this.hide(),this.element.val(this.startDate+this.separator+this.endDate)},clickCancel:function(){this.container.find(".calendar .day").removeClass("active").find(".tag").remove(),this.setCalendarInputVal()},setCalendarInputVal:function(){var t=arguments;0==t.length?(this.container.find('input[name="daterangepicker_start"]').val(""),this.container.find('input[name="daterangepicker_end"]').val("")):(this.container.find('input[name="daterangepicker_start"]').val(this.startDate),this.container.find('input[name="daterangepicker_end"]').val(this.endDate))},setStart:function(t,e){this.removeTag(),e.addClass("active"),this.startDate=t,this.container.find('input[name="daterangepicker_start"]').val(t),this.setTips("end")},removeTag:function(){this.container.find("td").removeClass("active").find(".tag").remove()},dateConvert:function(t){var e=t.match(/\d+/g);return new Date(e[0],e[1]-1,e[2])},clickDate:function(t){var e=t.target.tagName.toUpperCase(),a="TD"==e?$(t.target):$(t.target).parent("td"),n=a.attr("id"),i=this.dateConvert(a.attr("id"));return this.startDate&&this.endDate&&(this.startDate=this.endDate="",this.removeTag()),a.addClass("active"),""==this.startDate||i.getTime()<this.dateConvert(this.startDate).getTime()?void this.setStart(n,a):void(""!=this.startDate&&""==this.endDate&&(this.endDate=n,this.container.find('input[name="daterangepicker_end"]').val(n),this.element.val(this.startDate+this.separator+this.endDate),this.hide()))},hightLightRangDays:function(t,e){new Date(t),new Date(e)},checkminDate:function(t,e,a){var n=this.minDate.setHours(0,0,0,0),i=new Date(t,e,a).setHours(0,0,0,0);return n>i?!0:i>=n?!1:void 0},renderCalendar:function(t,e){var a=function(t,e){var a=new Array(31,28,31,30,31,30,31,31,30,31,30,31);return(t%4==0&&t%100!=0||t%400==0)&&(a[1]=29),a[e]},n=function(t,e,a){return new Date(t,e,a).getDay()},i=a(t,e),r=n(t,e,1);n(t,e,i);this.startDate&&this.endDate&&this.setCalendarInputVal(!0);var s=1,d="";d+="<h4>"+t+"年"+(e+1)+"月</h4>",d+="<table>",d+="<tr>",d+="<td>日</td>",d+="<td>一</td>",d+="<td>二</td>",d+="<td>三</td>",d+="<td>四</td>",d+="<td>五</td>",d+="<td>六</td>",d+="</tr>",d+="<tr>";var h=0;for(h=0;r>h;h++)d+="<td></td>";for(h=r;7>h;h++){if(this.checkminDate(t,e,s))var c="day disabled";else var c="day alive";d+='<td class="'+c+'" id="'+t+"/"+(e+1)+"/"+s+'"><em>'+s+"</em></td>",s++}d+="</tr>";for(var o=Math.ceil((i+r)/7),l=0;o-1>l;l++){d+="<tr>";for(var p=0;7>p;p++)if(s>i)d+="<td></td>";else{if(this.checkminDate(t,e,s))var c="day disabled";else var c="day alive";d+='<td class="'+c+'" id="'+t+"/"+(e+1)+"/"+s+'"><em>'+s+"</em></td>",s++}d+="</tr>"}d+="</table>",$('<div class="calendar-table ">').html(d).appendTo(this.container.find(".calendar"))}},$.fn.simpleDateRangePicker=function(t,e){return this.each(function(){var a=$(this);a.data("simpleDateRangePicker")&&a.data("simpleDateRangePicker").remove(),a.data("simpleDateRangePicker",new simpleDateRangePicker(a,t,e))}),this},$(function(){$('input[name="daterange"]').simpleDateRangePicker()});